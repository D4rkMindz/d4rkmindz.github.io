(window.webpackJsonp=window.webpackJsonp||[]).push([[88],{577:function(e,r,a){"use strict";a.r(r);var t=a(4),n=Object(t.a)({},(function(){var e=this,r=e.$createElement,a=e._self._c||r;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h2",{attrs:{id:"offline-was-nun"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#offline-was-nun","aria-hidden":"true"}},[e._v("#")]),e._v(" Offline, was nun?")]),e._v(" "),a("p",[e._v("Mittels "),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/web/api/service_worker_api",target:"_blank",rel:"noopener noreferrer"}},[e._v("Service Workers"),a("OutboundLink")],1),e._v(" kann man inzwischen auch Offline eine Webseite zum Laufen bringen. Dies ist auch nicht neu, jedoch wird dieser Gedanke mit den "),a("a",{attrs:{href:"/de/artikel/phpmagazin/4.17/progressive_web_app"}},[e._v("PWAs")]),e._v(" sehr gefördert.")]),e._v(" "),a("p",[e._v('Nachdem man ein Serviceworker Script registriert hat startet der "Circle of Life"')]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("window.navigator.serviceWorker.register('/path/to/serviceworker.js');\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"/de/artikel/phpmagazin/6.17/sw-lifecycle.png",alt:"No alt text available"}})]),e._v(" "),a("h4",{attrs:{id:"parsed"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#parsed","aria-hidden":"true"}},[e._v("#")]),e._v(" Parsed")]),e._v(" "),a("p",[e._v("Die Serviceworkerdatei ist fehlerfrei geparst worden.")]),e._v(" "),a("h4",{attrs:{id:"installing"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#installing","aria-hidden":"true"}},[e._v("#")]),e._v(" Installing")]),e._v(" "),a("p",[e._v("Der Serviceworker wird installiert.")]),e._v(" "),a("h4",{attrs:{id:"error"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#error","aria-hidden":"true"}},[e._v("#")]),e._v(" Error")]),e._v(" "),a("p",[e._v("Dieser Zustand tritt ein, wenn der Serviceworker nicht installiert werden konnte, oder während der Installation ein Fehler aufgetreten ist.")]),e._v(" "),a("h4",{attrs:{id:"activated"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#activated","aria-hidden":"true"}},[e._v("#")]),e._v(" Activated")]),e._v(" "),a("p",[e._v("Der Serviceworker wurde erfolgreich installiert.")]),e._v(" "),a("h4",{attrs:{id:"idle"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#idle","aria-hidden":"true"}},[e._v("#")]),e._v(" Idle")]),e._v(" "),a("p",[e._v("Kein registrierter Event wird aufgerufen und der Serviceworker wartet auf ein neues Ereignis.")]),e._v(" "),a("h4",{attrs:{id:"fetch"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fetch","aria-hidden":"true"}},[e._v("#")]),e._v(" Fetch")]),e._v(" "),a("p",[e._v("Der Serviceworker agiert als Proxy zwischen Applikation und Netzwerk. Er überwacht die Anfragen an das Netzwerk.")]),e._v(" "),a("h4",{attrs:{id:"terminated"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#terminated","aria-hidden":"true"}},[e._v("#")]),e._v(" Terminated")]),e._v(" "),a("p",[e._v("Der Serviceworker wird nicht mehr benötigt und wurde deshalb beendet.")]),e._v(" "),a("h3",{attrs:{id:"caching-und-fetching"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#caching-und-fetching","aria-hidden":"true"}},[e._v("#")]),e._v(" Caching und Fetching")]),e._v(" "),a("p",[e._v("Um Requests zu behandeln gibt es zwei APIs. Die Caching API cacht Requests und deren Responses und die Fetch API wird auslöst, wenn ein Request ausgeführt werden soll.")]),e._v(" "),a("p",[e._v("Cachen kann man dabei mit verschiedenen Stragtegien.")]),e._v(" "),a("h5",{attrs:{id:"cache-only"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cache-only","aria-hidden":"true"}},[e._v("#")]),e._v(" Cache Only")]),e._v(" "),a("p",[e._v("Alles wird aus dem Cache beantwortet. Ist ein Request nicht im Cache, wird dieser nicht beantwortet.")]),e._v(" "),a("h5",{attrs:{id:"network-only"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#network-only","aria-hidden":"true"}},[e._v("#")]),e._v(" Network Only")]),e._v(" "),a("p",[e._v("Hier überwacht der Serviceworker lediglich die Requests. Die Requests werden jedoch nicht im Cache hinzugefügt. Alles läuft über das Netzwerk.")]),e._v(" "),a("h5",{attrs:{id:"cache-falling-back-to-network"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cache-falling-back-to-network","aria-hidden":"true"}},[e._v("#")]),e._v(" Cache falling back to Network")]),e._v(" "),a("p",[e._v("Die am meisten verwendete Strategie. Wenn im Cache keine Antwort vorhanden ist, wird diese über das Netzwerk geholt und anschliessend gegached. Der Code dazu könnte so aussehen:")]),e._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("self.addEventListener('install', (event) => {\n  event.waitUntil(\n    // open a new cache\n    self.caches.open('myCache')\n      .then((cache) => {\n        // add file logo.png to cache\n        cache.add('logo.png')\n          .then(() => {\n            // finish the installation\n            self.skipWaiting();\n          });\n      })\n  );\n});\n\nself.addEventListener('fetch', (event) => {\n  event.respondWith(\n    // check if request matches with any request in the cache\n    self.caches.match(event.request)\n      .then((cacheEntry) => {\n        // respond with cache entry or fetch from network\n        return cacheEntry || self.fetch(event.request);\n      })\n  );\n});\n")])]),e._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[e._v("1")]),a("br"),a("span",{staticClass:"line-number"},[e._v("2")]),a("br"),a("span",{staticClass:"line-number"},[e._v("3")]),a("br"),a("span",{staticClass:"line-number"},[e._v("4")]),a("br"),a("span",{staticClass:"line-number"},[e._v("5")]),a("br"),a("span",{staticClass:"line-number"},[e._v("6")]),a("br"),a("span",{staticClass:"line-number"},[e._v("7")]),a("br"),a("span",{staticClass:"line-number"},[e._v("8")]),a("br"),a("span",{staticClass:"line-number"},[e._v("9")]),a("br"),a("span",{staticClass:"line-number"},[e._v("10")]),a("br"),a("span",{staticClass:"line-number"},[e._v("11")]),a("br"),a("span",{staticClass:"line-number"},[e._v("12")]),a("br"),a("span",{staticClass:"line-number"},[e._v("13")]),a("br"),a("span",{staticClass:"line-number"},[e._v("14")]),a("br"),a("span",{staticClass:"line-number"},[e._v("15")]),a("br"),a("span",{staticClass:"line-number"},[e._v("16")]),a("br"),a("span",{staticClass:"line-number"},[e._v("17")]),a("br"),a("span",{staticClass:"line-number"},[e._v("18")]),a("br"),a("span",{staticClass:"line-number"},[e._v("19")]),a("br"),a("span",{staticClass:"line-number"},[e._v("20")]),a("br"),a("span",{staticClass:"line-number"},[e._v("21")]),a("br"),a("span",{staticClass:"line-number"},[e._v("22")]),a("br"),a("span",{staticClass:"line-number"},[e._v("23")]),a("br"),a("span",{staticClass:"line-number"},[e._v("24")]),a("br"),a("span",{staticClass:"line-number"},[e._v("25")]),a("br")])]),a("h5",{attrs:{id:"cache-and-network-race"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cache-and-network-race","aria-hidden":"true"}},[e._v("#")]),e._v(" Cache and Network Race")]),e._v(" "),a("p",[e._v("Hier wird der Request von der Komponente, welche schneller antwortet, ausgeliefert.")]),e._v(" "),a("h5",{attrs:{id:"network-falling-back-to-cache"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#network-falling-back-to-cache","aria-hidden":"true"}},[e._v("#")]),e._v(" Network falling back to Cache")]),e._v(" "),a("p",[e._v("Wenn eine Anfrage an das Netzwerk fehlschlägt wird der Request aus dem Cache geladen.")]),e._v(" "),a("h5",{attrs:{id:"cache-then-network"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cache-then-network","aria-hidden":"true"}},[e._v("#")]),e._v(" Cache, then Network")]),e._v(" "),a("p",[e._v("Diese Strategie eignet sich besonders für schnell aktualisierende Inhalte. Hierbei wird ein Request direkt an den Cache (ohne Umweg über den Serviceworker) geleitet. Parallel dazu wird ein Request ins Netzwerk gesendet. Die Antwort des Netzwerkrequests wird dann in den Cache geschrieben. Nachdem die Antwort in den Cache geschrieben wurde, wird diese an die Applikation weiter gegeben.")]),e._v(" "),a("h3",{attrs:{id:"workboxjs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#workboxjs","aria-hidden":"true"}},[e._v("#")]),e._v(" WorkboxJS")]),e._v(" "),a("p",[e._v("Wer seinen Serviceworker oder dessen Implementierung nicht selbst möchte machen, kann dies mit Hilfe von "),a("a",{attrs:{href:"https://developers.google.com/web/tools/workbox/",target:"_blank",rel:"noopener noreferrer"}},[e._v("WorkboxJS.org"),a("OutboundLink")],1),e._v(" machen.")]),e._v(" "),a("h3",{attrs:{id:"fazit"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fazit","aria-hidden":"true"}},[e._v("#")]),e._v(" Fazit")]),e._v(" "),a("p",[e._v("Serviceworkers sind eine gute Sache, um die Ladezeit einer Webseite enorm zu verbessern. Auch eine gewisse Offlinefunktionalität ist gut. Jedoch sind Serviceworker noch nicht in allen Browsern "),a("a",{attrs:{href:"https://caniuse.com/#search=serviceworker",target:"_blank",rel:"noopener noreferrer"}},[e._v("unterstützt"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("p",[e._v("Ich freue mich darauf, wenn eine 100%ige Unterstützung vorhanden ist.")])])}),[],!1,null,null,null);r.default=n.exports}}]);