<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Datenbank Migration | Ein Entwicklertagebuch</title>
    <meta name="description" content="Ein paar Notizen von einem Entwickler für Entwickler">
    
    <meta property="og:site_name" content="A Dev Journal"><meta property="og:title" content="Datenbank Migration"><meta property="og:type" content="website"><meta property="og:url" content="blog.darker.dev/de/wiki/divers/database_migration.html"><meta name="twitter:title" content="Datenbank Migration"><meta name="twitter:url" content="blog.darker.dev/de/wiki/divers/database_migration.html"><meta name="twitter:card" content="Datenbank Migration - by @DevDarker"><meta name="twitter:label1" content="Written by"><meta name="twitter:data2" content="Björn Pfoster"><meta name="twitter:creator" content="@DevDarker">
    <link rel="preload" href="/assets/css/0.styles.07a5ecaf.css" as="style"><link rel="preload" href="/assets/js/app.ef31a697.js" as="script"><link rel="preload" href="/assets/js/2.72b81314.js" as="script"><link rel="preload" href="/assets/js/224.a734b713.js" as="script"><link rel="preload" href="/assets/js/3.447d62b7.js" as="script"><link rel="prefetch" href="/assets/js/10.f2370337.js"><link rel="prefetch" href="/assets/js/100.7af50499.js"><link rel="prefetch" href="/assets/js/101.540d100e.js"><link rel="prefetch" href="/assets/js/102.695c79f7.js"><link rel="prefetch" href="/assets/js/103.a563d1b2.js"><link rel="prefetch" href="/assets/js/104.21b3a553.js"><link rel="prefetch" href="/assets/js/105.ac9d4b3a.js"><link rel="prefetch" href="/assets/js/106.7150e307.js"><link rel="prefetch" href="/assets/js/107.d34089e4.js"><link rel="prefetch" href="/assets/js/108.e1140c63.js"><link rel="prefetch" href="/assets/js/109.460f1cf1.js"><link rel="prefetch" href="/assets/js/11.839590c7.js"><link rel="prefetch" href="/assets/js/110.5909eff3.js"><link rel="prefetch" href="/assets/js/111.8b3e3e0a.js"><link rel="prefetch" href="/assets/js/112.79a138ef.js"><link rel="prefetch" href="/assets/js/113.f20dcbed.js"><link rel="prefetch" href="/assets/js/114.1bf8a1b6.js"><link rel="prefetch" href="/assets/js/115.631ec90e.js"><link rel="prefetch" href="/assets/js/116.d15850e5.js"><link rel="prefetch" href="/assets/js/117.16d8ce72.js"><link rel="prefetch" href="/assets/js/118.5c05011d.js"><link rel="prefetch" href="/assets/js/119.9083df2a.js"><link rel="prefetch" href="/assets/js/12.8d3db533.js"><link rel="prefetch" href="/assets/js/120.e9198c3a.js"><link rel="prefetch" href="/assets/js/121.91d78b01.js"><link rel="prefetch" href="/assets/js/122.e31b10aa.js"><link rel="prefetch" href="/assets/js/123.6de4e8a7.js"><link rel="prefetch" href="/assets/js/124.781a97bd.js"><link rel="prefetch" href="/assets/js/125.786fc075.js"><link rel="prefetch" href="/assets/js/126.a54ec340.js"><link rel="prefetch" href="/assets/js/127.427da7ad.js"><link rel="prefetch" href="/assets/js/128.256e3e86.js"><link rel="prefetch" href="/assets/js/129.b2f6cc9e.js"><link rel="prefetch" href="/assets/js/13.4ed28f55.js"><link rel="prefetch" href="/assets/js/130.3964a51b.js"><link rel="prefetch" href="/assets/js/131.3f759f9b.js"><link rel="prefetch" href="/assets/js/132.dca0a52e.js"><link rel="prefetch" href="/assets/js/133.362065f6.js"><link rel="prefetch" href="/assets/js/134.24247129.js"><link rel="prefetch" href="/assets/js/135.3cc9fe8c.js"><link rel="prefetch" href="/assets/js/136.e56d6100.js"><link rel="prefetch" href="/assets/js/137.c222da0b.js"><link rel="prefetch" href="/assets/js/138.c03d31f6.js"><link rel="prefetch" href="/assets/js/139.850e9c17.js"><link rel="prefetch" href="/assets/js/14.cf575f2f.js"><link rel="prefetch" href="/assets/js/140.885a5e86.js"><link rel="prefetch" href="/assets/js/141.105237f9.js"><link rel="prefetch" href="/assets/js/142.f728ca29.js"><link rel="prefetch" href="/assets/js/143.18c86e17.js"><link rel="prefetch" href="/assets/js/144.7050ba86.js"><link rel="prefetch" href="/assets/js/145.d91f8ec4.js"><link rel="prefetch" href="/assets/js/146.b599edcd.js"><link rel="prefetch" href="/assets/js/147.cad166b3.js"><link rel="prefetch" href="/assets/js/148.3cf242c0.js"><link rel="prefetch" href="/assets/js/149.37cc13aa.js"><link rel="prefetch" href="/assets/js/15.316e6004.js"><link rel="prefetch" href="/assets/js/150.76a22837.js"><link rel="prefetch" href="/assets/js/151.c3b70093.js"><link rel="prefetch" href="/assets/js/152.84349f96.js"><link rel="prefetch" href="/assets/js/153.11374f76.js"><link rel="prefetch" href="/assets/js/154.1824c283.js"><link rel="prefetch" href="/assets/js/155.679c295c.js"><link rel="prefetch" href="/assets/js/156.35300e15.js"><link rel="prefetch" href="/assets/js/157.86fbc5d1.js"><link rel="prefetch" href="/assets/js/158.6922b11e.js"><link rel="prefetch" href="/assets/js/159.b579faa5.js"><link rel="prefetch" href="/assets/js/16.2cfd60be.js"><link rel="prefetch" href="/assets/js/160.f10791a4.js"><link rel="prefetch" href="/assets/js/161.20f318e8.js"><link rel="prefetch" href="/assets/js/162.26a9f60c.js"><link rel="prefetch" href="/assets/js/163.c34afa72.js"><link rel="prefetch" href="/assets/js/164.6adad2ee.js"><link rel="prefetch" href="/assets/js/165.00b3f3c5.js"><link rel="prefetch" href="/assets/js/166.65417b23.js"><link rel="prefetch" href="/assets/js/167.4ad1c52d.js"><link rel="prefetch" href="/assets/js/168.214a13f7.js"><link rel="prefetch" href="/assets/js/169.5649cff0.js"><link rel="prefetch" href="/assets/js/17.c0ce573d.js"><link rel="prefetch" href="/assets/js/170.c7d9ac2e.js"><link rel="prefetch" href="/assets/js/171.2726e317.js"><link rel="prefetch" href="/assets/js/172.a78eab44.js"><link rel="prefetch" href="/assets/js/173.54b2980b.js"><link rel="prefetch" href="/assets/js/174.82a173e9.js"><link rel="prefetch" href="/assets/js/175.ea990ebd.js"><link rel="prefetch" href="/assets/js/176.e6eedfca.js"><link rel="prefetch" href="/assets/js/177.2c61c655.js"><link rel="prefetch" href="/assets/js/178.9d4ef483.js"><link rel="prefetch" href="/assets/js/179.aa24be34.js"><link rel="prefetch" href="/assets/js/18.16d618c9.js"><link rel="prefetch" href="/assets/js/180.dbe20e4f.js"><link rel="prefetch" href="/assets/js/181.d773c592.js"><link rel="prefetch" href="/assets/js/182.76af2aba.js"><link rel="prefetch" href="/assets/js/183.e4549e33.js"><link rel="prefetch" href="/assets/js/184.49fe8621.js"><link rel="prefetch" href="/assets/js/185.0214d3d5.js"><link rel="prefetch" href="/assets/js/186.e1b69f0b.js"><link rel="prefetch" href="/assets/js/187.45137c52.js"><link rel="prefetch" href="/assets/js/188.28768b83.js"><link rel="prefetch" href="/assets/js/189.14e2b4bf.js"><link rel="prefetch" href="/assets/js/19.616a8eb9.js"><link rel="prefetch" href="/assets/js/190.ebc21d40.js"><link rel="prefetch" href="/assets/js/191.8c164c77.js"><link rel="prefetch" href="/assets/js/192.ab5c9598.js"><link rel="prefetch" href="/assets/js/193.faf4f6c2.js"><link rel="prefetch" href="/assets/js/194.0723c350.js"><link rel="prefetch" href="/assets/js/195.02c776dc.js"><link rel="prefetch" href="/assets/js/196.42302c31.js"><link rel="prefetch" href="/assets/js/197.75e7b36e.js"><link rel="prefetch" href="/assets/js/198.9338736e.js"><link rel="prefetch" href="/assets/js/199.a3baac9a.js"><link rel="prefetch" href="/assets/js/20.70f7cdb0.js"><link rel="prefetch" href="/assets/js/200.4e2c71ad.js"><link rel="prefetch" href="/assets/js/201.defb3bb5.js"><link rel="prefetch" href="/assets/js/202.1e773ec7.js"><link rel="prefetch" href="/assets/js/203.9b5eebb4.js"><link rel="prefetch" href="/assets/js/204.2d48df22.js"><link rel="prefetch" href="/assets/js/205.f9e2ca12.js"><link rel="prefetch" href="/assets/js/206.f051187c.js"><link rel="prefetch" href="/assets/js/207.c65a7689.js"><link rel="prefetch" href="/assets/js/208.fb84f3f6.js"><link rel="prefetch" href="/assets/js/209.1f43e823.js"><link rel="prefetch" href="/assets/js/21.2bd308a2.js"><link rel="prefetch" href="/assets/js/210.42b758fe.js"><link rel="prefetch" href="/assets/js/211.c2541e07.js"><link rel="prefetch" href="/assets/js/212.46178931.js"><link rel="prefetch" href="/assets/js/213.827b089b.js"><link rel="prefetch" href="/assets/js/214.bd013f35.js"><link rel="prefetch" href="/assets/js/215.39a48a6d.js"><link rel="prefetch" href="/assets/js/216.5b8e2dc3.js"><link rel="prefetch" href="/assets/js/217.3a533382.js"><link rel="prefetch" href="/assets/js/218.23c5eb5f.js"><link rel="prefetch" href="/assets/js/219.b9f07bc8.js"><link rel="prefetch" href="/assets/js/22.5fd61112.js"><link rel="prefetch" href="/assets/js/220.42714a08.js"><link rel="prefetch" href="/assets/js/221.86139493.js"><link rel="prefetch" href="/assets/js/222.bd09ac31.js"><link rel="prefetch" href="/assets/js/223.1daf1bc4.js"><link rel="prefetch" href="/assets/js/225.b55555f1.js"><link rel="prefetch" href="/assets/js/226.b4b4db62.js"><link rel="prefetch" href="/assets/js/227.f2ba54f2.js"><link rel="prefetch" href="/assets/js/228.2875dda4.js"><link rel="prefetch" href="/assets/js/229.a7f33ab5.js"><link rel="prefetch" href="/assets/js/23.5fe72bac.js"><link rel="prefetch" href="/assets/js/230.f24581dd.js"><link rel="prefetch" href="/assets/js/231.937beeb2.js"><link rel="prefetch" href="/assets/js/232.14a4bbd4.js"><link rel="prefetch" href="/assets/js/233.dfd54c0c.js"><link rel="prefetch" href="/assets/js/234.a77055c2.js"><link rel="prefetch" href="/assets/js/235.ab86c97e.js"><link rel="prefetch" href="/assets/js/236.3a9f7380.js"><link rel="prefetch" href="/assets/js/237.7860da1b.js"><link rel="prefetch" href="/assets/js/238.12c20d0a.js"><link rel="prefetch" href="/assets/js/239.c95f9229.js"><link rel="prefetch" href="/assets/js/24.c2a98366.js"><link rel="prefetch" href="/assets/js/240.bd28502b.js"><link rel="prefetch" href="/assets/js/241.ffa085eb.js"><link rel="prefetch" href="/assets/js/242.c3901ec0.js"><link rel="prefetch" href="/assets/js/243.458f3763.js"><link rel="prefetch" href="/assets/js/244.117da8ec.js"><link rel="prefetch" href="/assets/js/245.8f6a67bb.js"><link rel="prefetch" href="/assets/js/246.b7b03fc0.js"><link rel="prefetch" href="/assets/js/247.bd63eeec.js"><link rel="prefetch" href="/assets/js/248.5d4c8b83.js"><link rel="prefetch" href="/assets/js/249.6ca40fde.js"><link rel="prefetch" href="/assets/js/25.85e1df06.js"><link rel="prefetch" href="/assets/js/250.1830bdf2.js"><link rel="prefetch" href="/assets/js/251.2761bfde.js"><link rel="prefetch" href="/assets/js/252.ebbc35ba.js"><link rel="prefetch" href="/assets/js/253.d4670cf8.js"><link rel="prefetch" href="/assets/js/254.c159cfe1.js"><link rel="prefetch" href="/assets/js/255.e6478579.js"><link rel="prefetch" href="/assets/js/256.002d7a39.js"><link rel="prefetch" href="/assets/js/257.61195930.js"><link rel="prefetch" href="/assets/js/258.33d7bdb0.js"><link rel="prefetch" href="/assets/js/259.ef0987ca.js"><link rel="prefetch" href="/assets/js/26.978ea743.js"><link rel="prefetch" href="/assets/js/260.98a7245a.js"><link rel="prefetch" href="/assets/js/261.82f129ab.js"><link rel="prefetch" href="/assets/js/262.9fc95805.js"><link rel="prefetch" href="/assets/js/263.49229819.js"><link rel="prefetch" href="/assets/js/264.e934210f.js"><link rel="prefetch" href="/assets/js/265.f56a3b53.js"><link rel="prefetch" href="/assets/js/266.4f8fb902.js"><link rel="prefetch" href="/assets/js/267.fec88787.js"><link rel="prefetch" href="/assets/js/268.c8eb3e86.js"><link rel="prefetch" href="/assets/js/269.e3c3bf64.js"><link rel="prefetch" href="/assets/js/27.85958176.js"><link rel="prefetch" href="/assets/js/270.db5f3eb8.js"><link rel="prefetch" href="/assets/js/271.2f0eceab.js"><link rel="prefetch" href="/assets/js/272.3c9ba9f6.js"><link rel="prefetch" href="/assets/js/273.4d7a45c1.js"><link rel="prefetch" href="/assets/js/274.51249d10.js"><link rel="prefetch" href="/assets/js/275.83131248.js"><link rel="prefetch" href="/assets/js/276.c613aa2b.js"><link rel="prefetch" href="/assets/js/277.141d6828.js"><link rel="prefetch" href="/assets/js/278.d9633ece.js"><link rel="prefetch" href="/assets/js/279.4f916a21.js"><link rel="prefetch" href="/assets/js/28.8da29519.js"><link rel="prefetch" href="/assets/js/280.d3105c9f.js"><link rel="prefetch" href="/assets/js/281.1b661754.js"><link rel="prefetch" href="/assets/js/282.30030323.js"><link rel="prefetch" href="/assets/js/283.89d6a9e9.js"><link rel="prefetch" href="/assets/js/284.5887f1ad.js"><link rel="prefetch" href="/assets/js/285.6bafa738.js"><link rel="prefetch" href="/assets/js/286.641e6d19.js"><link rel="prefetch" href="/assets/js/287.2a2b23b8.js"><link rel="prefetch" href="/assets/js/288.b3172233.js"><link rel="prefetch" href="/assets/js/289.904f3801.js"><link rel="prefetch" href="/assets/js/29.c8f7f650.js"><link rel="prefetch" href="/assets/js/290.7dc3f00c.js"><link rel="prefetch" href="/assets/js/291.945c8f68.js"><link rel="prefetch" href="/assets/js/292.ad689a6a.js"><link rel="prefetch" href="/assets/js/293.3863dedc.js"><link rel="prefetch" href="/assets/js/294.88af268c.js"><link rel="prefetch" href="/assets/js/295.89ab859f.js"><link rel="prefetch" href="/assets/js/296.bf971125.js"><link rel="prefetch" href="/assets/js/297.afc2ff70.js"><link rel="prefetch" href="/assets/js/298.a930317b.js"><link rel="prefetch" href="/assets/js/299.576cb122.js"><link rel="prefetch" href="/assets/js/30.0a6ced0e.js"><link rel="prefetch" href="/assets/js/300.d24ff10f.js"><link rel="prefetch" href="/assets/js/301.7815ec75.js"><link rel="prefetch" href="/assets/js/302.2d8e71e5.js"><link rel="prefetch" href="/assets/js/303.b105f10f.js"><link rel="prefetch" href="/assets/js/304.67b88157.js"><link rel="prefetch" href="/assets/js/305.bda5deff.js"><link rel="prefetch" href="/assets/js/306.ce3bf527.js"><link rel="prefetch" href="/assets/js/307.c1568cd1.js"><link rel="prefetch" href="/assets/js/308.a7531131.js"><link rel="prefetch" href="/assets/js/309.23e4be51.js"><link rel="prefetch" href="/assets/js/31.3284d961.js"><link rel="prefetch" href="/assets/js/310.aae41a46.js"><link rel="prefetch" href="/assets/js/311.31f00f28.js"><link rel="prefetch" href="/assets/js/312.5d9c1d24.js"><link rel="prefetch" href="/assets/js/313.379d5a1e.js"><link rel="prefetch" href="/assets/js/314.f426477c.js"><link rel="prefetch" href="/assets/js/315.c5cbba54.js"><link rel="prefetch" href="/assets/js/316.778f32a7.js"><link rel="prefetch" href="/assets/js/317.1a38b339.js"><link rel="prefetch" href="/assets/js/318.804ffaf5.js"><link rel="prefetch" href="/assets/js/319.4eef0624.js"><link rel="prefetch" href="/assets/js/32.e3707a2b.js"><link rel="prefetch" href="/assets/js/320.9ce71911.js"><link rel="prefetch" href="/assets/js/321.812df999.js"><link rel="prefetch" href="/assets/js/322.aa782862.js"><link rel="prefetch" href="/assets/js/323.53fd387e.js"><link rel="prefetch" href="/assets/js/324.7a0509c7.js"><link rel="prefetch" href="/assets/js/325.f826c663.js"><link rel="prefetch" href="/assets/js/326.df1e0843.js"><link rel="prefetch" href="/assets/js/327.a4781ee3.js"><link rel="prefetch" href="/assets/js/328.236f2da7.js"><link rel="prefetch" href="/assets/js/329.317a2037.js"><link rel="prefetch" href="/assets/js/33.736cd0fb.js"><link rel="prefetch" href="/assets/js/330.21f4f71b.js"><link rel="prefetch" href="/assets/js/331.41b44d80.js"><link rel="prefetch" href="/assets/js/332.56efb4a1.js"><link rel="prefetch" href="/assets/js/333.cae4e628.js"><link rel="prefetch" href="/assets/js/334.25bfd4cf.js"><link rel="prefetch" href="/assets/js/335.4781a762.js"><link rel="prefetch" href="/assets/js/336.0a909e06.js"><link rel="prefetch" href="/assets/js/337.15d87d64.js"><link rel="prefetch" href="/assets/js/338.668e7b95.js"><link rel="prefetch" href="/assets/js/339.72356dee.js"><link rel="prefetch" href="/assets/js/34.8ed3d275.js"><link rel="prefetch" href="/assets/js/340.ad27d19f.js"><link rel="prefetch" href="/assets/js/341.f6a2e54f.js"><link rel="prefetch" href="/assets/js/342.d4e599a4.js"><link rel="prefetch" href="/assets/js/343.616658d2.js"><link rel="prefetch" href="/assets/js/344.177ab215.js"><link rel="prefetch" href="/assets/js/345.e9d6ccc2.js"><link rel="prefetch" href="/assets/js/346.2c4c65ce.js"><link rel="prefetch" href="/assets/js/347.66430b1f.js"><link rel="prefetch" href="/assets/js/348.49181d19.js"><link rel="prefetch" href="/assets/js/349.331e96bb.js"><link rel="prefetch" href="/assets/js/35.70a64743.js"><link rel="prefetch" href="/assets/js/350.e0022849.js"><link rel="prefetch" href="/assets/js/351.43e229a0.js"><link rel="prefetch" href="/assets/js/352.a0d63fe9.js"><link rel="prefetch" href="/assets/js/353.6d1cafd3.js"><link rel="prefetch" href="/assets/js/354.f6852c34.js"><link rel="prefetch" href="/assets/js/355.81463b8f.js"><link rel="prefetch" href="/assets/js/356.64633c8f.js"><link rel="prefetch" href="/assets/js/357.4ceff681.js"><link rel="prefetch" href="/assets/js/358.7aba4e2f.js"><link rel="prefetch" href="/assets/js/359.a802541f.js"><link rel="prefetch" href="/assets/js/36.111546d3.js"><link rel="prefetch" href="/assets/js/360.13948bd7.js"><link rel="prefetch" href="/assets/js/361.a9455f49.js"><link rel="prefetch" href="/assets/js/362.64d015e0.js"><link rel="prefetch" href="/assets/js/363.71959d81.js"><link rel="prefetch" href="/assets/js/364.61b5de8f.js"><link rel="prefetch" href="/assets/js/365.300b9873.js"><link rel="prefetch" href="/assets/js/366.56bc4905.js"><link rel="prefetch" href="/assets/js/367.b27c0d0e.js"><link rel="prefetch" href="/assets/js/368.a06d1a5e.js"><link rel="prefetch" href="/assets/js/369.a5725cb6.js"><link rel="prefetch" href="/assets/js/37.eb66d602.js"><link rel="prefetch" href="/assets/js/370.f9fa598c.js"><link rel="prefetch" href="/assets/js/371.efc64d64.js"><link rel="prefetch" href="/assets/js/372.95c0686a.js"><link rel="prefetch" href="/assets/js/373.a6aa8c5d.js"><link rel="prefetch" href="/assets/js/374.5686cc8e.js"><link rel="prefetch" href="/assets/js/38.730b4ecf.js"><link rel="prefetch" href="/assets/js/39.ba1f3a15.js"><link rel="prefetch" href="/assets/js/4.c1005faa.js"><link rel="prefetch" href="/assets/js/40.18e82df1.js"><link rel="prefetch" href="/assets/js/41.c60eeae6.js"><link rel="prefetch" href="/assets/js/42.82bd683f.js"><link rel="prefetch" href="/assets/js/43.c6643584.js"><link rel="prefetch" href="/assets/js/44.4aa59cce.js"><link rel="prefetch" href="/assets/js/45.f8022403.js"><link rel="prefetch" href="/assets/js/46.0ccddfce.js"><link rel="prefetch" href="/assets/js/47.c2aa7df2.js"><link rel="prefetch" href="/assets/js/48.cb8e342e.js"><link rel="prefetch" href="/assets/js/49.380a64af.js"><link rel="prefetch" href="/assets/js/5.8c371bfa.js"><link rel="prefetch" href="/assets/js/50.db245725.js"><link rel="prefetch" href="/assets/js/51.41f88270.js"><link rel="prefetch" href="/assets/js/52.340e11ce.js"><link rel="prefetch" href="/assets/js/53.9b8d7975.js"><link rel="prefetch" href="/assets/js/54.76121917.js"><link rel="prefetch" href="/assets/js/55.f8020067.js"><link rel="prefetch" href="/assets/js/56.07e7ed78.js"><link rel="prefetch" href="/assets/js/57.cca4facb.js"><link rel="prefetch" href="/assets/js/58.70cb1e98.js"><link rel="prefetch" href="/assets/js/59.68743746.js"><link rel="prefetch" href="/assets/js/6.5cf21165.js"><link rel="prefetch" href="/assets/js/60.aacb5f70.js"><link rel="prefetch" href="/assets/js/61.831afe31.js"><link rel="prefetch" href="/assets/js/62.044bdd54.js"><link rel="prefetch" href="/assets/js/63.ca00c735.js"><link rel="prefetch" href="/assets/js/64.50c6f898.js"><link rel="prefetch" href="/assets/js/65.d88b2bd9.js"><link rel="prefetch" href="/assets/js/66.159bc2d6.js"><link rel="prefetch" href="/assets/js/67.2e4d16a3.js"><link rel="prefetch" href="/assets/js/68.15172031.js"><link rel="prefetch" href="/assets/js/69.05adef93.js"><link rel="prefetch" href="/assets/js/7.cc52585c.js"><link rel="prefetch" href="/assets/js/70.8eb4ecb9.js"><link rel="prefetch" href="/assets/js/71.31394e32.js"><link rel="prefetch" href="/assets/js/72.d56e1ef1.js"><link rel="prefetch" href="/assets/js/73.2f7e966b.js"><link rel="prefetch" href="/assets/js/74.c6548a0f.js"><link rel="prefetch" href="/assets/js/75.3deb760f.js"><link rel="prefetch" href="/assets/js/76.73a2e583.js"><link rel="prefetch" href="/assets/js/77.61cce170.js"><link rel="prefetch" href="/assets/js/78.6e2543fd.js"><link rel="prefetch" href="/assets/js/79.db9232ad.js"><link rel="prefetch" href="/assets/js/8.4cc9c785.js"><link rel="prefetch" href="/assets/js/80.3e5868eb.js"><link rel="prefetch" href="/assets/js/81.984660ea.js"><link rel="prefetch" href="/assets/js/82.4f48d0ca.js"><link rel="prefetch" href="/assets/js/83.15a6b2c5.js"><link rel="prefetch" href="/assets/js/84.e0e0da54.js"><link rel="prefetch" href="/assets/js/85.a75d6a5a.js"><link rel="prefetch" href="/assets/js/86.a407fc01.js"><link rel="prefetch" href="/assets/js/87.7eed6bb5.js"><link rel="prefetch" href="/assets/js/88.3c8a247f.js"><link rel="prefetch" href="/assets/js/89.08e2867a.js"><link rel="prefetch" href="/assets/js/9.ecc467cd.js"><link rel="prefetch" href="/assets/js/90.c7772518.js"><link rel="prefetch" href="/assets/js/91.55526884.js"><link rel="prefetch" href="/assets/js/92.9e71228f.js"><link rel="prefetch" href="/assets/js/93.a0563edf.js"><link rel="prefetch" href="/assets/js/94.c523c165.js"><link rel="prefetch" href="/assets/js/95.b9f16c5f.js"><link rel="prefetch" href="/assets/js/96.bc59b297.js"><link rel="prefetch" href="/assets/js/97.1fecb9e5.js"><link rel="prefetch" href="/assets/js/98.3e6e9f49.js"><link rel="prefetch" href="/assets/js/99.00e675b1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.07a5ecaf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/de/" class="home-link router-link-active"><!----> <span class="site-name">Ein Entwicklertagebuch</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">en</a></li><li class="dropdown-item"><!----> <a href="/de/wiki/divers/database_migration.html" class="nav-link router-link-exact-active router-link-active">de</a></li></ul></div></div> <a href="https://github.com/d4rkmindz/d4rkmindz.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">en</a></li><li class="dropdown-item"><!----> <a href="/de/wiki/divers/database_migration.html" class="nav-link router-link-exact-active router-link-active">de</a></li></ul></div></div> <a href="https://github.com/d4rkmindz/d4rkmindz.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    Contribute!
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/de/" class="sidebar-link">Start</a></li><li><a href="/de/artikel/" class="sidebar-link">Artikel</a></li><li><a href="/de/installationen/" class="sidebar-link">Installationen</a></li><li><a href="/de/ionic/" class="sidebar-link">Ionic</a></li><li><a href="/de/lernjournal/" class="sidebar-link">Lernjournal</a></li><li><a href="/de/module/" class="sidebar-link">Module</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Wiki</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/de/wiki/" class="sidebar-link">Start</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Datentypen</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Divers</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/de/wiki/divers/" class="sidebar-link">Start</a></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>API</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Continuous delivery</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-2"><p class="sidebar-heading"><span>Protokolle</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/de/wiki/divers/http-request.html" class="sidebar-link">HTTP Request</a></li><li><a href="/de/wiki/divers/database_migration.html" class="active sidebar-link">Database migration</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/de/wiki/divers/database_migration.html#datenbank-migration" class="sidebar-link">Datenbank Migration</a></li></ul></li><li><a href="/de/wiki/divers/dom.html" class="sidebar-link">DOM</a></li><li><a href="/de/wiki/divers/ssh.html" class="sidebar-link">SSH</a></li><li><a href="/de/wiki/divers/bitmapgrafik.html" class="sidebar-link">Bitmapgrafik</a></li><li><a href="/de/wiki/divers/vectorgrafik.html" class="sidebar-link">Vektorgrafik</a></li><li><a href="/de/wiki/divers/yagni.html" class="sidebar-link">YAGNI</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Hacking</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Programmiersprachen</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Wordpress</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="/de/wiki/321regel.html" class="sidebar-link">321-Regel</a></li><li><a href="/de/wiki/apigen.html" class="sidebar-link">API gen</a></li><li><a href="/de/wiki/backend.html" class="sidebar-link">Backend</a></li><li><a href="/de/wiki/browser.html" class="sidebar-link">Browser</a></li><li><a href="/de/wiki/bytesystem.html" class="sidebar-link">ByeSystem</a></li><li><a href="/de/wiki/carousel.html" class="sidebar-link">Carousel</a></li><li><a href="/de/wiki/cms.html" class="sidebar-link">CMS</a></li><li><a href="/de/wiki/composer.html" class="sidebar-link">Composer</a></li><li><a href="/de/wiki/computer.html" class="sidebar-link">Computer</a></li><li><a href="/de/wiki/critical_rendering_path.html" class="sidebar-link">Critical Rendering Path</a></li><li><a href="/de/wiki/datenbank.html" class="sidebar-link">Datenbank</a></li><li><a href="/de/wiki/email.html" class="sidebar-link">Email</a></li><li><a href="/de/wiki/escaping.html" class="sidebar-link">Escaping</a></li><li><a href="/de/wiki/gui.html" class="sidebar-link">GUI</a></li><li><a href="/de/wiki/human-readable.html" class="sidebar-link">Human Readable</a></li><li><a href="/de/wiki/iperka.html" class="sidebar-link">Iperka</a></li><li><a href="/de/wiki/opensource.html" class="sidebar-link">OpenSource</a></li><li><a href="/de/wiki/os.html" class="sidebar-link">OS</a></li><li><a href="/de/wiki/pebcak.html" class="sidebar-link">PEBCAK</a></li><li><a href="/de/wiki/portanalyse.html" class="sidebar-link">Portanalyse</a></li><li><a href="/de/wiki/programmierer.html" class="sidebar-link">Programmierer</a></li><li><a href="/de/wiki/programmierparadigmen.html" class="sidebar-link">Programmierparadigmen</a></li><li><a href="/de/wiki/root.html" class="sidebar-link">Root</a></li><li><a href="/de/wiki/sata.html" class="sidebar-link">S-ATA</a></li><li><a href="/de/wiki/server-_und_client-seitig.html" class="sidebar-link">Server- und Client-Seitig</a></li><li><a href="/de/wiki/smtp.html" class="sidebar-link">SMTP</a></li><li><a href="/de/wiki/statik_dynamik.html" class="sidebar-link">Statik und Dynamik</a></li><li><a href="/de/wiki/svn.html" class="sidebar-link">SVN</a></li><li><a href="/de/wiki/url.html" class="sidebar-link">URL</a></li><li><a href="/de/wiki/utf8.html" class="sidebar-link">UTF8</a></li><li><a href="/de/wiki/ux.html" class="sidebar-link">UX</a></li><li><a href="/de/wiki/webseitenstruktur.html" class="sidebar-link">Webseitenstruktur</a></li><li><a href="/de/wiki/welcome.html" class="sidebar-link">Welcome</a></li><li><a href="/de/wiki/wysiwyg.html" class="sidebar-link">WYSIWYG</a></li><li><a href="/de/wiki/xss.html" class="sidebar-link">XSS</a></li><li><a href="/de/wiki/links.html" class="sidebar-link">Nice To Know</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Tutorials</span> <span class="arrow right"></span></p> <!----></section></li><li><a href="https://darker.dev" target="_blank" rel="noopener noreferrer" class="sidebar-link">Über mich<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="datenbank-migration"><a href="#datenbank-migration" aria-hidden="true" class="header-anchor">#</a> Datenbank Migration</h2> <p>Wenn man eine Webapplikation entwickelt oder betreut, kommt es hin und wieder vor, dass man seine Datenbank ändert. Man kann dabei viel Zeit (und Geld) sparen, indem man ein Datenbank Migrations Libraries braucht. Ein Beispiel dafür wäre <a href="https://phinx.org/" target="_blank" rel="noopener noreferrer">Phinx<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Diese Library kann man mittels <a href="/de/installationen/composer">Composer</a> ganz einfach über folgende Zeile im Terminal in seinem Projekt installieren:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>composer require robmorgan/phinx
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="initialisierung"><a href="#initialisierung" aria-hidden="true" class="header-anchor">#</a> Initialisierung</h3> <p>Anschliessend geht man im Terminal in den config/ Ordner des Projektes (cd config). Dort führt man folgenden Befehl aus:</p> <p>unter Linux lässt man das &quot;call&quot; weg.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>call ../vendor/bin/phinx init
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Damit initialisiert man Phinx in seinem Projekt. Es wird im config/ Ordner automatisch eine phinx.yml Datei erstellt. Diese braucht (in diesem Fall) nicht und kann sie deshalb direkt wieder löschen. Danach erstellt man eine phinx.php Datei. Diese Datei muss folgenden Code enthalten:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">//alle Funktionen (db(), config()) werden hierdurch geladen.</span>
<span class="token keyword">require_once</span> <span class="token constant">_DIR_</span> <span class="token punctuation">.</span> <span class="token double-quoted-string string">&quot;/bootstrap.php&quot;</span><span class="token punctuation">;</span>

<span class="token comment">// ein Datenbank Objekt wird erzeugt</span>
<span class="token variable">$db</span> <span class="token operator">=</span> <span class="token function">db</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// alle Werte, welche in der config.php Datei gespeichert sind, werden abrufbar gemacht.</span>
<span class="token variable">$config</span> <span class="token operator">=</span> <span class="token function">config</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Das PDO Objekt wird geholt.</span>
<span class="token variable">$pdo</span> <span class="token operator">=</span> <span class="token variable">$db</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getDriver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">connection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
    <span class="token single-quoted-string string">'paths'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
        <span class="token comment">// in diesem Fall _DIR_ . &quot;/../resources/migration&quot;</span>
        <span class="token single-quoted-string string">'migrations'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$config</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;db.migrationsPath&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'environments'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
        <span class="token single-quoted-string string">'default_database'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'local'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'local'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
            <span class="token comment">// Datenbank name (bsp test_datenbank)</span>
            <span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$config</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;db.database&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token comment">// Verbindung des vorher erzeugten PDO Objektes</span>
            <span class="token single-quoted-string string">'connection'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$pdo</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>Von hier aus muss jeder Aufruf auf Phinx geschehen, sonst wird Phinx nicht funktionieren (keine Konfiguration vorhanden).</p> <h3 id="setup"><a href="#setup" aria-hidden="true" class="header-anchor">#</a> Setup=</h3> <p>Es ist wichtig, dass man Phinx direkt von Anfang an in seinem Projekt installiert. Alternativ würde es sonst sehr anstrengend werden. Nach der Initialisierung von Phinx kann man dann folgenden Befehl (ebenfalls vom config/ Ordner aus) ausführen.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>call ../vendor/bin/phinx generate DatabaseNameSetup
(Linux:)
../vendor/bin/phinx DatabaseNameSetup
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Mit diesem Befehl erzeugt man eine Datei (PHP Klasse), welche {timestamp}_DatabaseNameSetup.php heisst. Den Namen (DatabaseNameSetup) kann man jedoch frei wählen, es dürfen jedoch nur Buchstaben verwendet werden. Auch ist wichtig, dass der erste Buchstabe ein Grossbuchstabe ist. Diese PHP-Klasse findet man unter dem in der phinx.php definierten Pfad (<em>DIR</em> . &quot;/../resources/migration&quot;) und diese sieht dann wie folgt aus:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Phinx</span>
Migration
AbstractMigration<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">DatabaseNameSetup</span> <span class="token keyword">extends</span> <span class="token class-name">AbstractMigration</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * Change Method.
     *
     * Write your reversible migrations using this method.
     *
     * More information on writing migrations is available here:
     * http://docs.phinx.org/en/latest/migrations.html#the-abstractmigration-class
     *
     * The following commands can be used in this method and Phinx will
     * automatically reverse them when rolling back:
     *
     *    createTable
     *    renameTable
     *    addColumn
     *    renameColumn
     *    addIndex
     *    addForeignKey
     *
     * Remember to call &quot;create()&quot; or &quot;update()&quot; and NOT &quot;save()&quot; when working
     * with the Table class.
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>

    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br></div></div><p>In dieser Klasse kann man in der change() Funktion die Datenbank definieren. Dies ist jedoch sehr mühsam. Man kann sich diesen Code auch generieren lassen.</p> <h3 id="code-generieren"><a href="#code-generieren" aria-hidden="true" class="header-anchor">#</a> Code generieren</h3> <p>Man viel Zeit einsparen kann, indem man sich den Code für die change() Funktion generieren lässt. Dies ist mit der Library von <a href="https://github.com/odan/phinx-migrations-generator" target="_blank" rel="noopener noreferrer">Odan<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> möglich. Man installiert diese ebenfalls mit <a href="/de/installationen/composer">Composer</a> im Root Ordner des Projektes.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>composer require odan/phinx-migrations-generator
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Danach kann wechselt man im Terminal in den config/ Ordner (cd config/). Dort gibt man dann folgenden Befehl ein:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>call vendor/bin/phinx-migrations.bat generate DatabaseNameSetup
(Linux:)
../vendor/bin/phinx-migrations generate DatabaseNameSetup
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Danach wird man zuerst gefragt, welchen Name man vergeben möchte. Dabei verwendet man DatabaseNameSetup. Genau wie im Abschnitt Setup beschrieben. Die zweite Abfrage ist, ob man das schema.php File ändern möchte. Da antwortet man mit Yes (y). Jetzt findet man in dem Ordner, welchen man in der phinx.php definiert hat (<em>DIR</em> . &quot;/../resources/migration&quot;) die gleiche PHP-Klasse, wie im Abschnitt Setup beschrieben. Diesmal ist sie jedoch bereits unter change() befüllt.</p> <p>Jetzt muss man nur noch alles auf den Server laden (und die Zugangsdaten für die Datenbank ändern (Benutzername und Passwort)) und via <a href="/de/wiki/divers/ssh">SSH</a> in den config/ Ordner navigieren. Dort führt man dann folgenden Behfehl aus (Linux Umgebung, da die meisten Server unter Linux laufen).</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>../vendor/bin/phinx migrate
(Windows:)
call ../vendor/bin/phinx migrate
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Jetzt ist das Setup der Datenbank abgeschlossen. In der Datenbank befindet sich neben den vom Entwickler erstellten Tabellen auch eine Tabelle &quot;phinxlog&quot;. In dieser Tabelle speichert Phinx, was bei der letzten Migration gemacht wurde.</p> <h3 id="migration"><a href="#migration" aria-hidden="true" class="header-anchor">#</a> Migration</h3> <p>Bei einer Migration wird alles genau gleich gemacht wie unter <a href="/de/wiki/divers/database_migration#code_generieren">Code generieren</a> beschrieben. Jedoch muss man DatabaseNameSetup umbennen. Am besten ist es, wenn man die Änderungen, welche man vorgenommen hat, beschreibt. (z. B.: &quot;RemovedTableUsers&quot;).</p> <h3 id="daten-einfugen"><a href="#daten-einfugen" aria-hidden="true" class="header-anchor">#</a> Daten einfügen</h3> <p>Phinx bietet auch die Funktion, Daten in eine Tabelle zu übergeben. Bei kleineren Tabellen kann man das anhand einer neuen Migrationsdatei, welche man manuell beschribt, machen.</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// Von phinx generierte klasse</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Array mit allen Einträgen.</span>
        <span class="token comment">// id: jede Tabelle muss eine Spalte mit einer eindeutigen id haben</span>
        <span class="token comment">// title: muss mit dem jeweiligen Titel in der Datenbank übereinstimmen</span>
        <span class="token variable">$rows</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token punctuation">[</span>
                <span class="token single-quoted-string string">'id'</span>    <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token single-quoted-string string">'title'</span>  <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'erster Eintrag'</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span>
                <span class="token single-quoted-string string">'id'</span>    <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">2</span><span class="token punctuation">,</span>
                <span class="token single-quoted-string string">'title'</span>  <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'zweiter Eintrag'</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span>
                <span class="token single-quoted-string string">'id'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">3</span><span class="token punctuation">,</span>
                <span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'dritter Eintrag'</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span>
                <span class="token single-quoted-string string">'id'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">4</span><span class="token punctuation">,</span>
                <span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'vierter Eintrag'</span>
            <span class="token punctuation">]</span>
        <span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token variable">$issueTypes</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'tabellen_name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Tabelle leeren und auto increment wert zurücksetzen</span>
        <span class="token variable">$issueTypes</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">truncate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$issueTypes</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token variable">$rows</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><p>Hat man grosse Datenmängen, ist dies so natürlich nicht umsetzbar. In diesem Fall sollte man die Daten aus der lokalen Datenbank auslesen und diese als json Datei an den Server mitgeben.</p> <p>Hierfür erstellen wir zuerst eine neue Klasse. Wie Ihr diese nennt, ist prinzipiell egal, doch der einfachheit halber nennen wir diese in unserem Beispiel einfach getJson.php.</p> <p>getJson.php:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token comment">/*
 * Zuerst müsst Ihr alle Daten aus eurer Datenbank holen und in das $rows Array abspeichern.
 * Da dies variieren kann, lasse ich diesen Punkt weg.
 */</span>
<span class="token comment">// $rows Array wird zum json Objekt</span>
<span class="token variable">$json</span> <span class="token operator">=</span> <span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$rows</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Json Code in ein .json File schreiben</span>
<span class="token function">file_put_contents</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;/path/to/migrations/folder/myJsonFile.json&quot;</span><span class="token punctuation">,</span> <span class="token variable">$json</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Dann legen wir, wie zuvor, eine neue Migrationsdatei an und füllen diese mit folgendem Code:</p> <div class="language-php line-numbers-mode"><pre class="language-php"><code><span class="token comment">// Json in Array speichern</span>
<span class="token variable">$rows</span> <span class="token operator">=</span> <span class="token function">json_decode</span><span class="token punctuation">(</span><span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;path/to/json/file/myJsonFile.json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token boolean constant">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;table_name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Tabelle leeren</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">truncate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token variable">$rows</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Nun nur noch auf den Server laden und das deployment Skript ausführen.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/d4rkmindz/d4rkmindz.github.io/edit/master/de/wiki/divers/database_migration.md" target="_blank" rel="noopener noreferrer">Edit this page on GitHub!</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <!----> </main></div><div class="global-ui"><!----><div class="reading-progress top" data-v-7681808f><div class="progress" data-v-7681808f></div></div><!----></div></div>
    <script src="/assets/js/app.ef31a697.js" defer></script><script src="/assets/js/2.72b81314.js" defer></script><script src="/assets/js/224.a734b713.js" defer></script><script src="/assets/js/3.447d62b7.js" defer></script>
  </body>
</html>
